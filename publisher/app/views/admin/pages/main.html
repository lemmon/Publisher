{% extends 'frame.html' %}

{% block rail %}

    {% for _locale in locales %}
    {% if (pages.langs[_locale.id] or pages.unlinked[_locale.id]) %}
    <div class="section">

        <h2 style="background-image:url({{ link.vendor('flags/{$(country.code)}.png', _locale) }})">
            <span class="locale">{{ _locale.name }} ({{ _locale.country.code }})</span>
            {{- '' -}}
            <span class="newpage"><a target="main" href="{{ link.to('@/@/create/%1', _locale.id) }}"><span class="caption">{{ "Create new"|t }}</span></a></span>
        </h2>
        

        {% include '_listpages.html' with {'_pages': pages.langs[_locale.id]} %}

        {% if (pages.unlinked[_locale.id]) %}
        <h3 class="unlinked">{{ "Unlinked pages"|t }}</h3>
        {% include '_listpages.html' with {'_pages': pages.unlinked[_locale.id]} %}
        {% endif %}
        
    </div>
    {% endif %}
    {% endfor %}
    
    <div class="section other">

        <h2 style="background-image:url({{ link.vendor('flags/_world.png', _locale) }})">
            <a target="main" href="{{ link.to('@/@/create') }}"><span class="caption">{{ "Add another locale"|t }}&hellip;</span></a>
        </h2>

    </div>
    
    <style>
    div.section h2 .newpage { display:none; }
    div.section h2 .newpage:before {
        font-family:'FontAwesome';
        content:"\f111";
        padding:0 5px;
        font-size:.35em;
        position:relative;
        top:-.50em;
    }
    div.section:hover h2 .newpage { display:inline; }
    </style>
    
    {#
    <style>
    .other a {
        opacity:.2;
    }
    #rail:hover .other a {
        opacity:.5;
    }
    .section.other:hover a {
        opacity:.85 !important;
    }
    .other a:hover {
        opacity:1 !important;
    }
    </style>
    #}
    
{% endblock %}
