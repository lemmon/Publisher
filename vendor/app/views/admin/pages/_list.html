{% for item in data %}
<tr class="{{ cycle(["odd", "even"], item.i) }} level{{ level }}">
	<td class="name">
		<a href="{{ link.toReturn(":update", item) }}" class="strong">{{ item.name }}</a>
	</td>
	<td class="nowrap ar tag">
		<span class="{{ item.state.color }}">{{ item.state|t }}</span>
	</td>
	<td class="tiny gray nowrap ac sel">{{ item.top }}</td>
	<td class="tiny gray nowrap ar">{{ item.updated_at|tDateTime }}</td>
	<td class="nowrap">
		<a href="{{ link.toReturn(":update", item) }}">{{ "Update"|t }}</a> |
		<a href="{{ link.toReturn(":delete", item) }}" onclick="return confirm('Are you sure to delete this entry?')">{{ "Delete"|t }}</a>
	</td>
</tr>
{% set children = item.children.all %}
{% include link.partial("list") with {"data": children, "level": level+1} %}
{% set i = i + children|length %}
{% endfor %}
